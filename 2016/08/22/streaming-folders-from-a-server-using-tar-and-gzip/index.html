<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>Streaming folders from a server over SSH using tar and gzip</title><!-- Begin Jekyll SEO tag v2.7.1 -->
<meta name="generator" content="Jekyll v4.2.0" />
<meta property="og:title" content="Streaming folders from a server over SSH using tar and gzip" />
<meta name="author" content="Manthan Dave" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="This is how you can stream a folder or multiple folders from a server over SSH protocol." />
<meta property="og:description" content="This is how you can stream a folder or multiple folders from a server over SSH protocol." />
<link rel="canonical" href="/www/2016/08/22/streaming-folders-from-a-server-using-tar-and-gzip/" />
<meta property="og:url" content="/www/2016/08/22/streaming-folders-from-a-server-using-tar-and-gzip/" />
<meta property="og:site_name" content="Manthan’s Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2016-08-22T22:09:35+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Streaming folders from a server over SSH using tar and gzip" />
<script type="application/ld+json">
{"description":"This is how you can stream a folder or multiple folders from a server over SSH protocol.","url":"/www/2016/08/22/streaming-folders-from-a-server-using-tar-and-gzip/","@type":"BlogPosting","headline":"Streaming folders from a server over SSH using tar and gzip","dateModified":"2016-08-22T22:09:35+00:00","datePublished":"2016-08-22T22:09:35+00:00","mainEntityOfPage":{"@type":"WebPage","@id":"/www/2016/08/22/streaming-folders-from-a-server-using-tar-and-gzip/"},"author":{"@type":"Person","name":"Manthan Dave"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link type="application/atom+xml" rel="alternate" href="/www/feed.xml" title="Manthan's Blog" /><link rel="shortcut icon" type="image/x-icon" href="/www/logo.png" />
  <link rel="stylesheet" href="/www/assets/css/main.css" />
</head><body a="auto">
    <main class="page-content" aria-label="Content">
      <div class="w">
        <a href="/www/">..</a><article>
  <p class="post-meta">
    <time datetime="2016-08-22 22:09:35 +0000">2016-08-22</time>
  </p>
  
  <h1>Streaming folders from a server over SSH using tar and gzip</h1>

  <p>This is how you can stream a folder or multiple folders from a server over SSH protocol.</p>

<p>To stream folders in uncompressed, raw format, run:</p>
<pre class="lang:sh decode:true ">ssh ec2-user@xx.xxx.xx.xxx "sudo tar -cO /folder1 /opt/folder2" | tar -xf -</pre>
<p>Since the tar file is being streamed raw, this could potentially take longer as more data is being passed between server and client. In my test for 700 megabytes of data, this command took 1:56 seconds.</p>

<p>There’s another method. <!--more-->This streams the tar file, pipes it into gzip on the remote server which comes out as compressed gzipped stream down to the client. The client then passes this compressed stream into gunzip which decompresses the stream and finally then pipes it into tar to extract it into its original folders.</p>
<pre class="lang:sh decode:true ">ssh -i ~/.ssh/lao345-sandbox.pem ec2-user@10.122.64.165 "sudo tar -cO /prod/msp /opt/beasys | gzip -c -" | gunzip -c - | tar -xf -</pre>
<p>With the same data as above, this method took smaller amount of time, 1:13 seconds to be exact.</p>

</article>
      </div>
    </main></body>
</html>