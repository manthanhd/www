<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>Gulpfile.js for vanilla AngularJS projects</title><!-- Begin Jekyll SEO tag v2.7.1 -->
<meta name="generator" content="Jekyll v4.2.0" />
<meta property="og:title" content="Gulpfile.js for vanilla AngularJS projects" />
<meta name="author" content="Manthan Dave" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Since I’ve learnt Angular, most of my front-end web applications are written in it. Its brilliant. Everything works fine, up to a point where your application has grown 10 times the size it was since you started it. At some point you’d want something to accelerate your delivery. That’s when gulp comes in." />
<meta property="og:description" content="Since I’ve learnt Angular, most of my front-end web applications are written in it. Its brilliant. Everything works fine, up to a point where your application has grown 10 times the size it was since you started it. At some point you’d want something to accelerate your delivery. That’s when gulp comes in." />
<link rel="canonical" href="/www/2016/01/22/gulpfile-js-for-vanilla-angularjs-projects/" />
<meta property="og:url" content="/www/2016/01/22/gulpfile-js-for-vanilla-angularjs-projects/" />
<meta property="og:site_name" content="Manthan’s Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2016-01-22T18:48:30+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Gulpfile.js for vanilla AngularJS projects" />
<script type="application/ld+json">
{"description":"Since I’ve learnt Angular, most of my front-end web applications are written in it. Its brilliant. Everything works fine, up to a point where your application has grown 10 times the size it was since you started it. At some point you’d want something to accelerate your delivery. That’s when gulp comes in.","url":"/www/2016/01/22/gulpfile-js-for-vanilla-angularjs-projects/","@type":"BlogPosting","headline":"Gulpfile.js for vanilla AngularJS projects","dateModified":"2016-01-22T18:48:30+00:00","datePublished":"2016-01-22T18:48:30+00:00","mainEntityOfPage":{"@type":"WebPage","@id":"/www/2016/01/22/gulpfile-js-for-vanilla-angularjs-projects/"},"author":{"@type":"Person","name":"Manthan Dave"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link type="application/atom+xml" rel="alternate" href="/www/feed.xml" title="Manthan's Blog" /><link rel="shortcut icon" type="image/x-icon" href="/www/logo.png" />
  <link rel="stylesheet" href="/www/assets/css/main.css" />
</head><body a="auto">
    <main class="page-content" aria-label="Content">
      <div class="w">
        <a href="/www/">..</a><article>
  <p class="post-meta">
    <time datetime="2016-01-22 18:48:30 +0000">2016-01-22</time>
  </p>
  
  <h1>Gulpfile.js for vanilla AngularJS projects</h1>

  <p>Since I’ve learnt Angular, most of my front-end web applications are written in it. Its brilliant. Everything works fine, up to a point where your application has grown 10 times the size it was since you started it. At some point you’d want something to accelerate your delivery. That’s when gulp comes in.</p>

<p>Gulp is kinda like a build tool but for javascript based applications. It runs on Node.js and is available on npm. All you need to do is:</p>
<pre class="lang:sh decode:true ">npm install -g gulp</pre>
<p>or if you are using a unix based application:</p>
<pre class="lang:sh decode:true ">sudo npm install -g gulp</pre>
<p>That gets you access to the gulp command line. Once you have gulp installed, you need to something that tells it what to do with your project. Unlike many other build tools, gulp favours code over configuration. This means that rather than writing XML or YAML files that define the tasks, you write code. This is what makes gulp unique.</p>

<p>So, here’s what I have. Below is my <code>gulpfile.js</code> that I use in most of my AngularJS projects:<!--more--></p>
<pre class="lang:js decode:true ">/**
* Created by manthanhd on 04/01/2016.
*/
var gulp = require('gulp'),
gutil = require('gulp-util'),
sourcemaps = require('gulp-sourcemaps'),
concat = require('gulp-concat'),
ngAnnotate = require('gulp-ng-annotate'),
watch = require('gulp-watch'),
uglify = require('gulp-uglify');

gulp.task('default', ['build-js']);

gulp.task('build-js', function() {
return gulp.src(['public/app/**/*.js'])
.pipe(sourcemaps.init())
.pipe(concat('bundle.min.js'))
.pipe(ngAnnotate())
//only uglify if gulp is ran with '--type production'
.pipe(gutil.env.type === 'production' ? uglify() : gutil.noop())
.pipe(gutil.env.type === 'production' ? gutil.noop() : sourcemaps.write())
.pipe(gulp.dest('public/dist'));
});

gulp.task('watch', function() {
gulp.watch('public/app/**/*.js', ['build-js']);
});</pre>
<p>Most of my AngularJS code resides in <code>public/app</code> directory and hence you’ll see that in multiple places in that file.</p>

<p>A quick glance should tell you that this minifies all of my AngularJS code and combines it all in one big file called <code>bundle.min.js</code> which is then placed in <code>public/dist</code> folder. My HTML page is configured to only reference <code>bundle.min.js</code>.</p>

<p>When executed normally, it doesn’t minify the code because it assumes that the javascript code is being used for development. However, when I run <code>gulp --type production</code> it minifies the code and doesn’t write sourcemaps.</p>

<p>You can install all of this by running:</p>
<pre class="lang:sh decode:true ">npm install --save-dev gulp gulp-concat gulp-ng-annotate gulp-sourcemaps gulp-uglify gulp-util gulp-watch</pre>
<p>Oh and here’s my <code>package.json</code>:</p>
<pre class="lang:default decode:true "> {
"name": "my-sample-angular-project",
"version": "0.0.0",
"private": true,
"scripts": {
"start": "node ./bin/www"
},
"devDependencies": {
"gulp": "^3.9.0",
"gulp-concat": "^2.6.0",
"gulp-ng-annotate": "^1.1.0",
"gulp-sourcemaps": "^1.6.0",
"gulp-uglify": "^1.5.1",
"gulp-util": "^3.0.7",
"gulp-watch": "^4.3.5"
}
}</pre>
<p> </p>

</article>
      </div>
    </main></body>
</html>