<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>Download and store a website&#8217;s public cert into a Java keystore</title><!-- Begin Jekyll SEO tag v2.7.1 -->
<meta name="generator" content="Jekyll v4.2.0" />
<meta property="og:title" content="Download and store a website’s public cert into a Java keystore" />
<meta name="author" content="Manthan Dave" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="The other day I had to download a public cert from a web service’s host and store it in my java keystore so that it can be trusted. Here’s what I did: openssl s_client -showcerts -connect www.manthanhd.com:443 &lt; /dev/null 2&gt;/dev/null| sed -n -e &#39;/BEGIN\ CERTIFICATE/,/END\ CERTIFICATE/ p&#39; &gt; /tmp/www-manthanhd-com.cert sudo keytool -import -file /tmp/www-manthanhd-com.cert -alias wwwmanthanhdcom -keystore /opt/java/jre/lib/security/cacerts -storepass changeit The first line downloads the public cert from www.manthanhd.com and stores it in /tmp/www-manthanhd-com.cert." />
<meta property="og:description" content="The other day I had to download a public cert from a web service’s host and store it in my java keystore so that it can be trusted. Here’s what I did: openssl s_client -showcerts -connect www.manthanhd.com:443 &lt; /dev/null 2&gt;/dev/null| sed -n -e &#39;/BEGIN\ CERTIFICATE/,/END\ CERTIFICATE/ p&#39; &gt; /tmp/www-manthanhd-com.cert sudo keytool -import -file /tmp/www-manthanhd-com.cert -alias wwwmanthanhdcom -keystore /opt/java/jre/lib/security/cacerts -storepass changeit The first line downloads the public cert from www.manthanhd.com and stores it in /tmp/www-manthanhd-com.cert." />
<link rel="canonical" href="/www/2017/05/05/download-and-store-a-websites-public-cert-into-a-java-keystore/" />
<meta property="og:url" content="/www/2017/05/05/download-and-store-a-websites-public-cert-into-a-java-keystore/" />
<meta property="og:site_name" content="Manthan’s Blog" />
<meta property="og:image" content="/www/wp-content/uploads/2017/05/ssl-banner-e1448642838695.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2017-05-05T14:20:30+00:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="/www/wp-content/uploads/2017/05/ssl-banner-e1448642838695.png" />
<meta property="twitter:title" content="Download and store a website’s public cert into a Java keystore" />
<script type="application/ld+json">
{"description":"The other day I had to download a public cert from a web service’s host and store it in my java keystore so that it can be trusted. Here’s what I did: openssl s_client -showcerts -connect www.manthanhd.com:443 &lt; /dev/null 2&gt;/dev/null| sed -n -e &#39;/BEGIN\\ CERTIFICATE/,/END\\ CERTIFICATE/ p&#39; &gt; /tmp/www-manthanhd-com.cert sudo keytool -import -file /tmp/www-manthanhd-com.cert -alias wwwmanthanhdcom -keystore /opt/java/jre/lib/security/cacerts -storepass changeit The first line downloads the public cert from www.manthanhd.com and stores it in /tmp/www-manthanhd-com.cert.","url":"/www/2017/05/05/download-and-store-a-websites-public-cert-into-a-java-keystore/","@type":"BlogPosting","headline":"Download and store a website’s public cert into a Java keystore","dateModified":"2017-05-05T14:20:30+00:00","datePublished":"2017-05-05T14:20:30+00:00","mainEntityOfPage":{"@type":"WebPage","@id":"/www/2017/05/05/download-and-store-a-websites-public-cert-into-a-java-keystore/"},"image":"/www/wp-content/uploads/2017/05/ssl-banner-e1448642838695.png","author":{"@type":"Person","name":"Manthan Dave"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link type="application/atom+xml" rel="alternate" href="/www/feed.xml" title="Manthan's Blog" /><link rel="shortcut icon" type="image/x-icon" href="/www/logo.png" />
  <link rel="stylesheet" href="/www/assets/css/main.css" />
</head><body a="auto">
    <main class="page-content" aria-label="Content">
      <div class="w">
        <a href="/www/">..</a><article>
  <p class="post-meta">
    <time datetime="2017-05-05 14:20:30 +0000">2017-05-05</time>
  </p>
  
  <h1>Download and store a website&#8217;s public cert into a Java keystore</h1>

  <p>The other day I had to download a public cert from a web service’s host and store it in my java keystore so that it can be trusted. Here’s what I did:</p>
<pre class="lang:sh decode:true">openssl s_client -showcerts -connect www.manthanhd.com:443 &lt; /dev/null 2&gt;/dev/null| sed -n -e '/BEGIN\ CERTIFICATE/,/END\ CERTIFICATE/ p' &gt; /tmp/www-manthanhd-com.cert
sudo keytool -import -file /tmp/www-manthanhd-com.cert -alias wwwmanthanhdcom -keystore /opt/java/jre/lib/security/cacerts -storepass changeit</pre>
<p>The first line downloads the public cert from www.manthanhd.com and stores it in <span class="lang:default decode:true crayon-inline">/tmp/www-manthanhd-com.cert</span>.</p>

<p>Next, we’re using keytool to import that certificate into the Java cacert keystore. I am only using sudo here because Java is installed as root. If in your case its not, you can just use the keytool command without the sudo prefix.</p>

<p>Also, on my test box, the java keystore has the default java keystore password which is changeit. Make sure this matches whatever your keystore password is.</p>

<p>Last but not least, the alias that the cert is imported against is important because this is what you will have to use to later find it. In this case I’m just using the hostname without any punctuations. This way, I can easily find any cert I want for any host if I need it.</p>

<p>Thanks to Jamie Tanna (<a href="https://jvt.me/" target="_blank" rel="noopener noreferrer">jvt.me</a>) and Jack Gough (<a href="https://www.testingsyndicate.com/" target="_blank" rel="noopener noreferrer">testingsyndicate.com</a>) for their help on this.</p>

</article>
      </div>
    </main></body>
</html>