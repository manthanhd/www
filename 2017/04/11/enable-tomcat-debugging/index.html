<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>Enable tomcat debugging</title><!-- Begin Jekyll SEO tag v2.7.1 -->
<meta name="generator" content="Jekyll v4.2.0" />
<meta property="og:title" content="Enable tomcat debugging" />
<meta name="author" content="Manthan Dave" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Shutdown tomcat and make sure that it has properly shut down by monitoring the tomcat process." />
<meta property="og:description" content="Shutdown tomcat and make sure that it has properly shut down by monitoring the tomcat process." />
<link rel="canonical" href="/www/2017/04/11/enable-tomcat-debugging/" />
<meta property="og:url" content="/www/2017/04/11/enable-tomcat-debugging/" />
<meta property="og:site_name" content="Manthan’s Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2017-04-11T06:25:51+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Enable tomcat debugging" />
<script type="application/ld+json">
{"description":"Shutdown tomcat and make sure that it has properly shut down by monitoring the tomcat process.","url":"/www/2017/04/11/enable-tomcat-debugging/","@type":"BlogPosting","headline":"Enable tomcat debugging","dateModified":"2017-04-11T06:25:51+00:00","datePublished":"2017-04-11T06:25:51+00:00","mainEntityOfPage":{"@type":"WebPage","@id":"/www/2017/04/11/enable-tomcat-debugging/"},"author":{"@type":"Person","name":"Manthan Dave"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link type="application/atom+xml" rel="alternate" href="/www/feed.xml" title="Manthan's Blog" /><link rel="shortcut icon" type="image/x-icon" href="/www/logo.png" />
  <link rel="stylesheet" href="/www/assets/css/main.css" />
</head><body a="auto">
    <main class="page-content" aria-label="Content">
      <div class="w">
        <a href="/www/">..</a><article>
  <p class="post-meta">
    <time datetime="2017-04-11 06:25:51 +0000">2017-04-11</time>
  </p>
  
  <h1>Enable tomcat debugging</h1>

  <p>Shutdown tomcat and make sure that it has properly shut down by monitoring the tomcat process.</p>

<p>Once it has completely shutdown, export the following environment variables:</p>
<pre class="lang:sh decode:true ">export JPDA_ADDRESS=8000
export JPDA_TRANSPORT=dt_socket</pre>
<p>Here, we’re setting the jpda address to port <span class="lang:default decode:true crayon-inline">8000</span>. Note this down as you will need this port number in order to connect via your IDE or whatever debugging tool you’re using.</p>

<p>Options above will run tomcat as usual so if you want to debug something that happens early on in the lifecycle, you either need to be really quick about attaching your debugger or add the following JPDA option:</p>
<pre class="lang:sh decode:true">export JPDA_SUSPEND=y</pre>
<p>This will suspend the tomcat startup until you attach your debugger.</p>

<p>Next, start tomcat jpda using catalina script:</p>
<pre class="lang:sh decode:true">./catalina.sh jpda start</pre>
<p>At this stage, you can monitor the log in <span class="lang:default decode:true crayon-inline ">catalina.out</span> file to make sure everything goes smoothly.</p>

<p>Now setup your IDE to connect to tomcat at port <span class="lang:default decode:true crayon-inline">8000</span>. If you are using vagrant as your VM, make sure you are port forwarding <span class="lang:default decode:true crayon-inline ">8000</span> in your network settings. If not, you can always tunnel in:</p>
<pre class="lang:sh decode:true">vagrant ssh -- -L 8000:localhost:8000</pre>
<p>Or if its a remote server, you can just use the normal ssh command:</p>
<pre class="lang:sh decode:true crayon-selected">ssh -L 8000:localhost:8000 user@server.com</pre>
<p>Hope this helps!</p>

<p><strong>Credits</strong></p>
<ul>
 	<li>Conor Restall: For suggesting JPDA_SUSPEND option.</li>
</ul>

</article>
      </div>
    </main></body>
</html>