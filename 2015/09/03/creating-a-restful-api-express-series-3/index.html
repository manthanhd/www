<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>Creating a RESTful API (Express series 3)</title><!-- Begin Jekyll SEO tag v2.7.1 -->
<meta name="generator" content="Jekyll v4.2.0" />
<meta property="og:title" content="Creating a RESTful API (Express series 3)" />
<meta name="author" content="Manthan Dave" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="So in the last post we went over the project structure. This time, we’ll actually modify some of the code to create our own RESTful web service." />
<meta property="og:description" content="So in the last post we went over the project structure. This time, we’ll actually modify some of the code to create our own RESTful web service." />
<link rel="canonical" href="/www/2015/09/03/creating-a-restful-api-express-series-3/" />
<meta property="og:url" content="/www/2015/09/03/creating-a-restful-api-express-series-3/" />
<meta property="og:site_name" content="Manthan’s Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2015-09-03T18:08:53+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Creating a RESTful API (Express series 3)" />
<script type="application/ld+json">
{"description":"So in the last post we went over the project structure. This time, we’ll actually modify some of the code to create our own RESTful web service.","url":"/www/2015/09/03/creating-a-restful-api-express-series-3/","@type":"BlogPosting","headline":"Creating a RESTful API (Express series 3)","dateModified":"2015-09-03T18:08:53+00:00","datePublished":"2015-09-03T18:08:53+00:00","mainEntityOfPage":{"@type":"WebPage","@id":"/www/2015/09/03/creating-a-restful-api-express-series-3/"},"author":{"@type":"Person","name":"Manthan Dave"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link type="application/atom+xml" rel="alternate" href="/www/feed.xml" title="Manthan's Blog" /><link rel="shortcut icon" type="image/x-icon" href="/www/logo.png" />
  <link rel="stylesheet" href="/www/assets/css/main.css" />
</head><body a="auto">
    <main class="page-content" aria-label="Content">
      <div class="w">
        <a href="/www/">..</a><article>
  <p class="post-meta">
    <time datetime="2015-09-03 18:08:53 +0000">2015-09-03</time>
  </p>
  
  <h1>Creating a RESTful API (Express series 3)</h1>

  <p>So in the last post we went over the project structure. This time, we’ll actually modify some of the code to create our own RESTful web service.</p>

<p>If you don’t know what a RESTful web service is, you should check out the <a href="https://en.wikipedia.org/wiki/Representational_state_transfer" target="_blank">wikipedia</a> entry for it.</p>

<p>As discussed in the previous post, all of our routes are defined in files located in the routes folder which are then referenced and collated in the app.js file. So, to create our own RESTful API, we need to do something in this area.</p>

<p>Lets checkout the <code>index.js</code> file and see whats in it.<!--more--></p>
<pre class="lang:js decode:true ">var express = require('express');
var router = express.Router();

/* GET home page. */
router.get('/', function(req, res, next) {
res.render('index', { title: 'Express' });
});

module.exports = router;</pre>
<p>This is the typical structure of any nodejs module. Top section is to declare dependencies and instantiate objects. Middle part is to actually do things. And the final bottom part is to clean up and export the module. This file says that when the root (<code>/</code>) is accessed by a HTTP GET method (indicated by <code>router.get</code>), call a function. This function is defined as <code>function(req, res, next) {...}</code>. The three variables, <code>req</code>, <code>res</code> and <code>next</code> are function parameters. I won’t go into the details regarding basic JavaScript in any of these tutorials. If you have any questions, check out some of many JavaScript resources available on the web.</p>

<p>These parameters <code>req</code>, <code>res</code> and <code>next</code> are the request object, the response object and the function call to the next module in the middle ware stack respectively. The line <code>res.render('index', { title: 'Express' });</code> is using the render function of the response object, asking express to render the template <code>'index'</code> with parameters specified by the JSON object <code>{ title: 'Express' }</code>. Since Express knows that we are using Jade templating engine (defined in <code>app.js</code>), it will go to the views folder and find the file named <code>index.jade</code> and will render it.</p>

<p>Right, so now that’s out of the way, lets go and create our own service. For the purpose of this tutorial, we’ll create a health check web service. When it gets called, it will return <code>OK</code> status indicating that the server health is ok. Since this will require a GET request to be invoked, we’ll be using router.get and hence the first line of the code will be very similar to the already existing one.</p>
<pre class="lang:js decode:true ">router.get('/', function(req, res, next) {
// My health check API
});</pre>
<p><code></code>Next, we need to change two things. One is the URL reference. Currently, its set to <code>'/'</code>. Because this has already been defined, lets modify it to our own path. This can be anything you want but for the sake of simplicity, lets make it <code>/healthcheck</code>. Your code should now look like this:</p>
<pre class="lang:js decode:true ">router.get('/healthcheck', function(req, res, next) {
// My health check API
});</pre>
<p><code></code>The code doesn’t do anything yet. Lets change that. Remove the comment <code><strong>// My health check API</strong></code> and put the following logic in it.</p>
<pre class="lang:js decode:true ">var statusString = 'OK';
return res.send(statusString);</pre>
<p><code></code>After your change, the file <code>index.js</code> should look like this:</p>
<pre class="lang:js decode:true ">var express = require('express');
var router = express.Router();

/* GET home page. */
router.get('/', function(req, res, next) {
res.render('index', { title: 'Express' });
});

router.get('/healthcheck', function(req, res, next) {
var statusString = 'OK';
return res.send(statusString);
});

module.exports = router;</pre>
<p>Awesome. Now go back to your command line and run <code>npm start</code> command to start your server. Once started, go to <code>http://localhost:3000/healthcheck</code> on your web browser. You should see the following output:</p>

<p><code>OK</code></p>

<p>Now this isn’t very clean as its returning plain text instead of proper JSON response. Shut down the server and go back to your IDE. Modify the code in the <code>/healthcheck</code> router in <code>index.js</code> to be the following:</p>
<pre class="lang:js decode:true ">var statusObject = {status: 'OK'};
return res.send(statusObject);</pre>
<p><code></code>Start the server and navigate back to <code>http://localhost:3000/healthcheck</code> in your browser. You should see a JSON response this time:</p>
<pre class="lang:default decode:true ">{

"status": "OK"

}</pre>
<p>Great work! You’ve just written your first RESTful web service in Node.js using Express! In the next post we’ll take this to a next level and migrate what we’ve written to a separate file to reduce clutter and make the code a bit cleaner. Enjoy!</p>

</article>
      </div>
    </main></body>
</html>